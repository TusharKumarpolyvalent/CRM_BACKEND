generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Activity {
  activity_id String   @id
  id          String
  description String
  phone       String
  agentId     String
  created_at  DateTime @default(now())
}

model Campaign {
  id          String    @id
  name        String
  client_name String?
  status      String?   @default("1")
  description String?
  start_date  DateTime? @db.Date
  end_date    DateTime? @db.Date
  meta_date   DateTime? @db.Date
  created_at  DateTime? @db.Date
  updated_at  DateTime  @default(now()) @db.Timestamp(0)
  Leads       Leads[]
}

model Leadrecord {
  id         String   @id
  status1    String?
  status2    String?
  status3    String?
  remark1    String?
  remark2    String?
  remark3    String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@map("LeadRecord")
}

model Leads {
  id          Int              @id @default(autoincrement())
  campaign_id String?
  name        String
  phone       String?
  email       String?
  city        String?          @db.LongText
  product     String?
  source      String?
  status      String?          @default("New")
  assigned_to String?
  assigned_at DateTime?
  attempts    Int              @default(0)
  last_call   DateTime?
  followup_at DateTime?
  doc_status  leads_doc_status @default(pending)
  remarks     String?
  created_at  DateTime         @default(now())
  updated_at  DateTime         @updatedAt

  pincode           String    @default("")
  reason            String    @default("")
  reassign          String?
  checkedclientlead Boolean   @default(false)
  agentname_leads   String?
  last_assigned_at  DateTime?
  Campaign          Campaign? @relation(fields: [campaign_id], references: [id])
  CallLogs          CallLog[]
}

model CallLog {
  id        Int      @id @default(autoincrement())
  lead_id   Int
  agent_id  String
  campaign_id String?
  called_at DateTime @default(now())

  lead Leads @relation(fields: [lead_id], references: [id])
}

model Users {
  id         String     @id
  name       String     @db.VarChar(150)
  email      String     @db.VarChar(150)
  password   String     @db.VarChar(255)
  role       users_role @default(agent)
  created_at DateTime   @default(now())
  updated_at DateTime   @updatedAt
}

enum users_role {
  admin
  agent
}

enum leads_doc_status {
  pending
  review
  closed
}
